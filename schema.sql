CREATE TABLE task_category (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE check_instance_check (id INT AUTO_INCREMENT NOT NULL, user_id INT DEFAULT NULL, check_instance_id INT DEFAULT NULL, task_id INT DEFAULT NULL, date DATETIME NOT NULL, checked TINYINT(1) NOT NULL, note LONGTEXT DEFAULT NULL, INDEX IDX_963B41F7A76ED395 (user_id), INDEX IDX_963B41F7D4C4DD14 (check_instance_id), INDEX IDX_963B41F78DB60186 (task_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE task (id INT AUTO_INCREMENT NOT NULL, checklist_id INT DEFAULT NULL, task_category_id INT DEFAULT NULL, name VARCHAR(255) NOT NULL, description LONGTEXT DEFAULT NULL, order_num INT NOT NULL, INDEX IDX_527EDB25B16D08A7 (checklist_id), INDEX IDX_527EDB25543330D0 (task_category_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE checklist (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, description LONGTEXT DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE fos_user (id INT AUTO_INCREMENT NOT NULL, username VARCHAR(255) NOT NULL, username_canonical VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, email_canonical VARCHAR(255) NOT NULL, enabled TINYINT(1) NOT NULL, salt VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, last_login DATETIME DEFAULT NULL, locked TINYINT(1) NOT NULL, expired TINYINT(1) NOT NULL, expires_at DATETIME DEFAULT NULL, confirmation_token VARCHAR(255) DEFAULT NULL, password_requested_at DATETIME DEFAULT NULL, roles LONGTEXT NOT NULL COMMENT '(DC2Type:array)', credentials_expired TINYINT(1) NOT NULL, credentials_expire_at DATETIME DEFAULT NULL, UNIQUE INDEX UNIQ_957A647992FC23A8 (username_canonical), UNIQUE INDEX UNIQ_957A6479A0D96FBF (email_canonical), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE check_instance (id INT AUTO_INCREMENT NOT NULL, assigned_user_id INT DEFAULT NULL, user_id INT DEFAULT NULL, checklist_id INT DEFAULT NULL, title VARCHAR(255) NOT NULL, domain VARCHAR(255) DEFAULT NULL, customer VARCHAR(255) DEFAULT NULL, date DATETIME NOT NULL, deadline DATETIME DEFAULT NULL, deadline_reminder_last_sent DATETIME DEFAULT NULL, info LONGTEXT DEFAULT NULL, INDEX IDX_AFCE2EB0ADF66B1A (assigned_user_id), INDEX IDX_AFCE2EB0A76ED395 (user_id), INDEX IDX_AFCE2EB0B16D08A7 (checklist_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE check_instance_check ADD CONSTRAINT FK_963B41F7A76ED395 FOREIGN KEY (user_id) REFERENCES fos_user (id);
ALTER TABLE check_instance_check ADD CONSTRAINT FK_963B41F7D4C4DD14 FOREIGN KEY (check_instance_id) REFERENCES check_instance (id);
ALTER TABLE check_instance_check ADD CONSTRAINT FK_963B41F78DB60186 FOREIGN KEY (task_id) REFERENCES task (id);
ALTER TABLE task ADD CONSTRAINT FK_527EDB25B16D08A7 FOREIGN KEY (checklist_id) REFERENCES checklist (id);
ALTER TABLE task ADD CONSTRAINT FK_527EDB25543330D0 FOREIGN KEY (task_category_id) REFERENCES task_category (id);
ALTER TABLE check_instance ADD CONSTRAINT FK_AFCE2EB0ADF66B1A FOREIGN KEY (assigned_user_id) REFERENCES fos_user (id);
ALTER TABLE check_instance ADD CONSTRAINT FK_AFCE2EB0A76ED395 FOREIGN KEY (user_id) REFERENCES fos_user (id);
ALTER TABLE check_instance ADD CONSTRAINT FK_AFCE2EB0B16D08A7 FOREIGN KEY (checklist_id) REFERENCES checklist (id);
